<div class="container-fluid page">
  <div class="page__box p-3 mt-2">Users Admin</div>
  <div class="page__content shadow p-3 position-relative">
    <div class="page__content-data text-center">
      <a (click)="addUser()" class="btn btn-primary mb-3"> <i class="fa fa-user-plus"> </i> add</a>

      <p-table [value]="users" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Type</th>
            <th>Info</th>
          </tr>
        </ng-template>
        <ng-template let-user pTemplate="body">
          <tr>
            <td>{{user.id}}</td>
            <td>{{user.name}}</td>
            <td>{{user.type}}</td>
            <td>
              <button (click)="viewUser(user.id)" class="btn btn-primary" type="button">Show Details</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

<p-dialog [(visible)]="show"
          (onHide)="cancel()"
          [breakpoints]="{'960px': '75vw', '640px': '100vw'}"
          [style]="{width: '50vw'}"
          [transitionOptions]="'0ms'"
          header="Bref"
>
  <app-add-user *ngIf="action === 'add' || action==='edit'" (userAddedEvent)="refreshData()" [user]="selectedUser"></app-add-user>
  <app-viewuser *ngIf="action === 'view'" (userDeletedEvent)="refreshData()" [user]="selectedUser"></app-viewuser>
</p-dialog>
